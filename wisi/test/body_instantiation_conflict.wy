;; subset of Ada-like grammar illustrating the conflict between a procedure
;; body and a generic procedure instantiation.

%{
(require 'wisi)
%}

%package body_instantiation_conflict-wy

%keyword BEGIN "begin"
%keyword END "end"
%keyword IS "is"
%keyword LEFT_PAREN "("
%keyword NEW "new"
%keyword NULL "null"
%keyword PROCEDURE "procedure"
%keyword RIGHT_PAREN ")"

%token <punctuation> SEMICOLON ";"

%token <symbol> IDENTIFIER

%%

library_item
  : subprogram_body
  | generic_instantiation
  ;

subprogram_body
  : subprogram_specification IS BEGIN NULL END SEMICOLON
    `(wisi-statement-action 1 'statement-start 6 'statement-end)
  ;

subprogram_specification
  : PROCEDURE IDENTIFIER LEFT_PAREN IDENTIFIER RIGHT_PAREN
    `(wisi-statement-action 3 'open-paren 5 'close-paren)
  | PROCEDURE IDENTIFIER
  ;

generic_instantiation
  : PROCEDURE IDENTIFIER IS NEW IDENTIFIER LEFT_PAREN IDENTIFIER RIGHT_PAREN SEMICOLON
    `(wisi-statement-action 1 'statement-start 9 'statement-end)
  ;

%%

;;; end of file
