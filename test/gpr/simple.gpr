--  A very simple file, for gpr-wisi development/debugging
--
--  One of each type of gpr statement.
--
--  Newlines in odd places to check for indentation errors

--EMACSCMD:major-mode
--EMACSRESULT:'gpr-mode
project Simple is

   type GNAT_Version_Type
     is ("7.0.1",
         "6.2.2", "6.2.1",
         "GPL-2012", "GPL-2011");

   --EMACSCMD:(gpr-add-log-current-function)
   --EMACSRESULT:"Simple"

   -- Keywords are case-insensitive
   GNAT_Version : GNAT_Version_Type := EXTERNAL ("GNAT_VERSION");

   for Source_Dirs use
     ("../auto",
      "../../1553");

   for Object_Dir use "objects";

   package Compiler is
      Style_Checks := "-gnaty3abcefhiklM120nprtx";

      --EMACSCMD:(gpr-add-log-current-function)
      --EMACSRESULT:"Compiler"
      case GNAT_Version is
         when "GPL-2012" | "7.0.1" =>
            for Default_Switches ("Ada") use
              ("-gnat2012",
               -- comment in list
               "-gnatw.V", "-gnatyO"
              ) & Style_Checks
                & Standard_Common.Compiler'Default_Switches;

         when "GPL-2011" |
            "6.2.2" | -- FIXME: continuation line; ada-indent-broken = 2
            "6.2.1" =>
            --  comment in case
            for Default_Switches ("Ada") use ("-gnat2005", "-gnatyO");

         when "4.3.2" =>
            null;
         end case;
   end Compiler;
end Simple;
