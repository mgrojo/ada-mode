;;; generated from object_declaration.wy -*- buffer-read-only:t -*-
;;;
;; Small grammar to explore warning about "shares prefix with shorter RHS"

%meta_syntax BNF

%keyword NULL "null"
%keyword ACCESS "access"
%keyword RANGE "range"
%keyword CONSTANT "constant"
%keyword ALIASED "aliased"
%generate Packrat_Proc Ada re2c
%start compilation

%token <punctuation> COLON ":"
%token <punctuation> COLON_EQUAL ":="
%token <punctuation> DOT_DOT ".."
%token <punctuation> SEMICOLON ";"
%token <punctuation> SLASH "/"
%token <punctuation> STAR "*"

%token <string-double-one-line> STRING_LITERAL %[ (["][\x20-\x21\x23-\U0010FFFF]*["])+ ]%
%token <symbol> IDENTIFIER %[ [a-zA-Z\x80-\U0010FFFF][0-9a-zA-Z_\x80-\U0010FFFF]* ]%
%token <number> NUMERIC_LITERAL %[ [0-9]+ ]%
%non_grammar <comment-new-line> COMMENT "--"
%non_grammar <non-reporting> WHITESPACE %[ [ \t] ]%
%non_grammar <new-line> NEW_LINE

compilation
  : compilation object_declaration
  | object_declaration
  ;

object_declaration
  : IDENTIFIER COLON ALIASED CONSTANT subtype_indication assign_value SEMICOLON
  | IDENTIFIER COLON ALIASED CONSTANT subtype_indication SEMICOLON
  | IDENTIFIER COLON ALIASED subtype_indication assign_value SEMICOLON
  | IDENTIFIER COLON ALIASED subtype_indication SEMICOLON
  | IDENTIFIER COLON CONSTANT subtype_indication assign_value SEMICOLON
  | IDENTIFIER COLON CONSTANT subtype_indication SEMICOLON
  | IDENTIFIER COLON subtype_indication assign_value SEMICOLON
  | IDENTIFIER COLON subtype_indication SEMICOLON
  | IDENTIFIER COLON ALIASED CONSTANT access_definition assign_value SEMICOLON
  | IDENTIFIER COLON ALIASED CONSTANT access_definition SEMICOLON
  | IDENTIFIER COLON ALIASED access_definition assign_value SEMICOLON
  | IDENTIFIER COLON ALIASED access_definition SEMICOLON
  | IDENTIFIER COLON CONSTANT access_definition assign_value SEMICOLON
  | IDENTIFIER COLON CONSTANT access_definition SEMICOLON
  | IDENTIFIER COLON access_definition assign_value SEMICOLON
  | IDENTIFIER COLON access_definition SEMICOLON
  ;
%suppress object_declaration "may never match; it shares a prefix"

subtype_indication
  : name constraint
  | name
  ;

constraint
  : RANGE expression DOT_DOT expression
  ;

access_definition
  : ACCESS CONSTANT name
  | ACCESS name
  ;

assign_value
  : COLON_EQUAL expression
  ;

expression
  : expression multiplying_operator primary
  | primary
  ;

primary
  : NUMERIC_LITERAL
  | NULL
  | name
  ;

name
  : IDENTIFIER
  | STRING_LITERAL
  ;

multiplying_operator
  : STAR
  | SLASH
  ;


;; end of file
