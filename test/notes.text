(dvc.main)
(xmtn-status-one "../..")

Makefile
../Makefile
~/Web/Makefile
/Examples
~/bin/emacs_test.sh
(setq ada-prj-default-project-file nil)
(setq ada-xref-project-files nil)

 actual bugs
http://debbugs.gnu.org/

http://debbugs.gnu.org/cgi/bugreport.cgi?bug=5746
    fixed, posted to ada-mode, waiting for responses

http://debbugs.gnu.org/cgi/bugreport.cgi?bug=1913
    replace [a-z] with [[:alpha:]] etc

http://stephe-leake.org/pipermail/emacs-ada-mode_stephe-leake.org/2009-February/000251.html

http://stephe-leake.org/pipermail/emacs-ada-mode_stephe-leake.org/2010-February/000275.html
    ada-clean-buffer-before-saving doesn't say obsolete in customization
        add replacement in manual

gpr-mode still has clean-buffer-before-saving

align needs to handle 'not null access constant':
   procedure Connect
     (Self          : not null access constant Q_Abstract_Button'Class;
      Receiver      : not null access Qt4.Widgets.Q_Widget'Class;
      Clicked_Slot  : in String := "";
      Pressed_Slot  : in String := "";
      Released_Slot : in String := "";
      Toggled_Slot  : in String := "");

 integrate gpr files
../ada-xref.el
../ada-mode.texi

use 'gnat stub -Pfoo.gpr' instead of 'gnatstub'
    add to Example
    see GDS ccsds.packets; add To_CCSDS_Packet_Length => needs sal.endianness

use 'gnat find -P'
    add to Example

 elisp
    info Tips for Documentation Strings :
    `variable' is a hyperlink
    \\[function] shows the keybinding to invoke function

 ../ada-mode.texi
match gnu style
    indent first line
    double space after .


doc arbitrary project variables; can be referenced in ${foo}

doc ada-load-project-hook

add gpr-mode

doc ada-set-write-file-hook

replace section on indentation with reference to customise | ada | indent

 to do
make casing a list variable
    common, gpm vs common, mms

merge my patches into current/cvs
    find-file-patches currently disabled since broken

add gnat-fix-error.el

add ada-mode version history list on web page

this doesn't work, because it tries to execute the string directly, not via a shell
   (setq ada-gnat-cmd "schroot -- gnat")

strip trailing spaces from project file variables
    url-eat-trailing-space
    add \s* at end of regexp

test 'build_dir' different than project file dir

need clean command

automatically find the right .gpr file, just like we now find the right .adp file
    or better :)

add Reload to menu even when Load was not used
    allow reloading a .adp that was found automatically
    show the current project file even if it was found automatically
    uniquify project file names; lots of gds.prj

add "Clear project list" to project menu

specify a true "default" project file, that is only used if the "normal" search fails
    current mechanism specifies "current" file, not "default" file
    finds .adp if ada-xref-default-prj-file not set

vhdl mode also supports project files, with extension .prj
    found automatically in GDS_Timers

organize Customize into groups under Ada
    editing
    compiling
    other

change C-c C-v from 'check current file' to 'check current main'

ada-vms.el is because Emacs on VMS is stuck at 19.28? still true?

list of main programs on the Ada menu, with checks
    "change to current" adds to that list

clean up ../gpr-mode.el
    works
    capitalizes 'project'
    uses Ada indentation, which is often wrong

ada-mode discuss:
    cross referencing is better in GPS?
        mentioned by Pascal Obry on comp.lang.ada
        Emmanuel says there are some features in *.ali that emacs ada-mode doesn't use
        use GPS code if available

review FIXMEs

test, clean up find-file stuff

 Emacs bzr
http://www.emacswiki.org/emacs/BzrForEmacsDevs

trunk is main development branch

release branch is emacs-n
    cd /home/Projects/emacs
    bzr branch --bind http://bzr.savannah.gnu.org/r/emacs/emacs-23 emacs-23
    bzr branch emacs-23 work_stephe-23

only tracking changes in ada-mode after each Emacs release
    but need to prepare patches to submit against trunk
    mtn branch emacs_stephe.trunk
        (really need to drop emacs 21 on lynx!)

update from bzr release branch:
    cd /home/Projects/emacs/emacs-23
    bzr pull

    cd ../work_stephe-23

    bzr pull

    # no need to compile; using debian package

patch my stuff:
    (ediff-files "/home/Projects/emacs/work_stephe-23/lisp/progmodes/ada-mode.el" "../ada-mode.el"   )
    (ediff-files "/home/Projects/emacs/work_stephe-23/lisp/progmodes/ada-prj.el"  "../ada-prj.el"    )
    (ediff-files "/home/Projects/emacs/work_stephe-23/lisp/progmodes/ada-stmt.el" "../ada-stmt.el"   )
    (ediff-files "/home/Projects/emacs/work_stephe-23/lisp/progmodes/ada-xref.el" "../ada-xref.el"   )
    (ediff-files "/home/Projects/emacs/work_stephe-23/doc/misc/ada-mode.texi"     "../ada-mode.texi" )

    run checkdoc, whitespace-cleanup

    Makefile
        # edit EMACS to point to /usr/bin/emacs
        test-clean all

    (dvc-status)

 create patches against Emacs trunk to submit

10 Apr 2011: automake failing causes make failing

update from bzr:
    cd /home/Projects/emacs/trunk
    bzr pull

    cd ../work_stephe

    quilt pop -a

    bzr pull

    /home/Projects/emacs/patches
        delete committed patches

    quilt push -a
        push remaining patches
        if they fail, recreate them via process below

    cd /home/Projects/emacs/work_stephe-build
        make
        sudo make install

        if necessary:

        rm -rf *
        (sal-debian)
        cd ../work_stephe
        autoreconf -i
        cd ../work_stephe-build
        ../work_stephe/configure
            installs to /usr/local; standard emacs is in /usr
        make bootstrap
        make info
        sudo make install


patch to/from my stuff (see changelog below):
    start a new patch for each bug
        cd /home/Projects/emacs/
        quilt new ada-mode-bug-#.diff
        quilt add work_stephe/lisp/ChangeLog
        quilt add work_stephe/lisp/progmodes/ada-mode.el

    (ediff-files "../ada-mode.el" "/home/Projects/emacs/work_stephe/lisp/progmodes/ada-mode.el")
    (ediff-files "../ada-prj.el" "/home/Projects/emacs/work_stephe/lisp/progmodes/ada-prj.el")
    (ediff-files "../ada-stmt.el" "/home/Projects/emacs/work_stephe/lisp/progmodes/ada-stmt.el")
    (ediff-files "../ada-xref.el" "/home/Projects/emacs/work_stephe/lisp/progmodes/ada-xref.el")
    (ediff-files "../ada-mode.texi" "/home/Projects/emacs/work_stephe/doc/misc/ada-mode.texi")

    run checkdoc, whitespace-cleanup

    Makefile
        byte-compile-bzr
            if that's broken, use byte-compile-release

    cd /home/Projects/emacs/work_stephe-build

    quilt refresh

    make

    Makefile
        test-clean all


Create a Changelog entry
    (dvc-status "/home/Projects/emacs/work_stephe")
    M-d each file, accumulate dvc log
        don't doc whitespace fixes
        do doc docstring fixes

    copy to the right Changelog:
        /home/Projects/emacs/work_stephe/lisp/ChangeLog
        /home/Projects/emacs/work_stephe/doc/misc/ChangeLog

quilt refresh

on sabul: scp stephe@192.168.0.101:/home/Projects/emacs/patches/ada-mode-bug-#.diff .
email to Juanma Barranquero <lekktu@gmail.com>

new/extra/obsolete
    ada-aunit.el
    ada-vms.el

 cleanup
- progmodes/ada-xref.el: ada-find-in-src-path
    needs shell-quote-argument?

replace some uses of 'is-windows' with 'w32-shell-dos-semantics'

find canonical function for 'is-windows'
    used to append .exe; probably not needed at all

use convert-standard-filename for DOS

review use of ada-check-emacs-version

maintain xemacs support?
    find xemacs users
    use featurep 'xemacs

 testing
testing /Examples
    go thru steps in ../ada-mode.texi
    (setq ada-always-ask-project nil)
    /Examples/Example_1/hello.adb
    Example_2
    Example_3
    Example_4
    Example_5

Makefile

add tests from GPS source

test list of 'supported packages' in ada-mode.el:
;;;   `which-function-mode': Display the name of the subprogram the cursor is
;;;      in in the mode line.
;;;   `outline-mode': Provides the capability to collapse or expand the code
;;;      for specific language constructs, for instance if you want to hide the
;;;      code corresponding to a subprogram
;;;   `align': This mode is now provided with Emacs 21, but can also be
;;;      installed manually for older versions of Emacs. It provides the
;;;      capability to automatically realign the selected region (for instance
;;;      all ':=', ':' and '--' will be aligned on top of each other.
;;;   `imenu': Provides a menu with the list of entities defined in the current
;;;      buffer, and an easy way to jump to any of them
;;;   `speedbar': Provides a separate file browser, and the capability for each
;;;      file to see the list of entities defined in it and to jump to them
;;;      easily
;;;   `abbrev-mode': Provides the capability to define abbreviations, which
;;;      are automatically expanded when you type them. See the Emacs manual.

find EUnit
    Ask.com, google.com didn't find anything


 separate release process
change version after release

run checkdoc, whitespace-cleanup
    ../ada-mode.el
    ../ada-prj.el
    ../ada-stmt.el
    (_not_ ../ada-support.el)
    (_not_ ../ada-tartan.el)
    (_not_ ../ada-vms.el)
    ../ada-xref.el
    ../gpr-mode.el

build manual
    ../Makefile all

(dvc-status "../..")

cd ..
mtn tag h:emacs_stephe.main version_4_00

clean out /Examples

/home/Projects/Web/stephe-leake/emacs/ada-mode/emacs-ada-mode.html
    new version

~/Web/Makefile
    emacs
    sync

change version after release
    ../ada-mode.el ada-mode-version
    ../ada-mode.texi Ada Mode Version
    ../README first line
    ~/Web/Makefile EMACS_ZIP_VERSION EMACS_ADA_MODE_ZIP_VERSION
    /home/Projects/Web/stephe-leake/emacs/ada-mode/emacs-ada-mode.html
        version in file name
    /home/Projects/Web/stephe-leake/index.html
        date in stephe-emacs file name
        delete old versions in emacs, emacs/ada-mode directories
    this file, tag command above

(dvc.stephe)
(dvc-status "../..")

;; end of file
