;; grammar has a reduce-reduce conflict

%{
(require 'wisi)
%}

%package range_conflict-wy

%keyword IN "in"
%keyword LEFT_PAREN "("
%keyword RANGE "range"
%keyword RIGHT_PAREN ")"

%token <punctuation> DOT_DOT ".."
%token <punctuation> TICK "'"

%token <symbol> IDENTIFIER

;; not used, but <string> required by wisi-setup
%token <string> STRING_LITERAL
%%

compilation_unit
  : membership_choice range
    (setq wisi-test-success t)
  ;

membership_choice
  : primary
  | range ;; note that this does _not_ conflict with RANGE
  ;

primary
  : IDENTIFIER
  | STRING_LITERAL
  | LEFT_PAREN relation RIGHT_PAREN
  ;

range
  : IDENTIFIER TICK RANGE LEFT_PAREN relation RIGHT_PAREN ;; a little weird, but it's a test
  | IDENTIFIER TICK RANGE
  | primary DOT_DOT primary
  ;

relation
  : primary IN membership_choice
  ;

%%
;;; end of file
